.TH POSTLOCK 1 
.ad
.fi
.SH NAME
postlock
\-
lock mail folder and execute command
.SH SYNOPSIS
.na
.nf
.fi
\fBpostlock\fR [\fB-c \fIconfig_dir\fB] [\fB-l \fIlock_style\fB]
[\fB-v\fR] \fIfile command...\fR
.SH DESCRIPTION
.ad
.fi
The \fBpostlock\fR command locks \fIfile\fR for exclusive
access, and executes \fIcommand\fR. The locking method is
compatible with the Postfix UNIX-style local delivery agent.

Options:
.IP "\fB-c \fIconfig_dir\fR"
Read the \fBmain.cf\fR configuration file in the named directory
instead of the default configuration directory.
.IP "\fB-l \fIlock_style\fR"
Override the locking method specified via the
\fBmailbox_delivery_lock\fR configuration parameter (see below).
.IP \fB-v\fR
Enable verbose logging for debugging purposes. Multiple \fB-v\fR
options make the software increasingly verbose.
.PP
Arguments:
.IP \fIfile\fR
A mailbox file. The user should have read/write permission.
.IP \fIcommand...\fR
The command to execute while \fIfile\fR is locked for exclusive
access.  The command is executed directly, i.e. without
interpretation by a shell command interpreter.
.SH DIAGNOSTICS
.ad
.fi
The result status is 75 (EX_TEMPFAIL) when \fBpostlock\fR
could not perform the requested operation.  Otherwise, the
exit status is the exit status from the command.
.SH BUGS
.ad
.fi
With remote file systems, the ability to acquire a lock does not
necessarily eliminate access conflicts. Avoid file access by
processes running on different machines.
.SH ENVIRONMENT
.na
.nf
.ad
.fi
.IP \fBMAIL_CONFIG\fR
Directory with Postfix configuration files.
.IP \fBMAIL_VERBOSE\fR
Enable verbose logging for debugging purposes.
.SH CONFIGURATION PARAMETERS
.na
.nf
.ad
.fi
The following \fBmain.cf\fR parameters are especially relevant to
this program. See the Postfix \fBmain.cf\fR file for syntax details
and for default values.
.SH "Locking controls"
.ad
.fi
.IP \fBdeliver_lock_attempts\fR
Limit the number of attempts to acquire an exclusive lock.
.IP \fBdeliver_lock_delay\fR
Time in seconds between successive attempts to acquire
an exclusive lock.
.IP \fBstale_lock_time\fR
Limit the time after which a stale lock is removed.
.IP \fBmailbox_delivery_lock\fR
What file locking method(s) to use when delivering to a UNIX-style
mailbox.
The default setting is system dependent.  For a list of available
file locking methods, use the \fBpostconf -l\fR command.
.SH "Resource controls"
.ad
.fi
.IP \fBfork_attempts\fR
Number of attempts to \fBfork\fR() a process before giving up.
.IP \fBfork_delay\fR
Delay in seconds between successive \fBfork\fR() attempts.
.SH LICENSE
.na
.nf
.ad
.fi
The Secure Mailer license must be distributed with this software.
.SH AUTHOR(S)
.na
.nf
Wietse Venema
IBM T.J. Watson Research
P.O. Box 704
Yorktown Heights, NY 10598, USA
