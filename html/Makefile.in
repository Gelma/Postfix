# For now, just hard-coded rules for daemons, commands, config files.

DAEMONS	=  bounce.8.html cleanup.8.html defer.8.html error.8.html local.8.html \
	master.8.html pickup.8.html pipe.8.html qmgr.8.html showq.8.html \
	smtp.8.html smtpd.8.html trivial-rewrite.8.html
COMMANDS= mailq.1.html newaliases.1.html postalias.1.html postcat.1.html \
	postconf.1.html postfix.1.html postkick.1.html postlock.1.html \
	postlog.1.html postdrop.1.html postmap.1.html sendmail.1.html \
	postsuper.1.html
CONFIG	= access.5.html aliases.5.html canonical.5.html relocated.5.html \
	transport.5.html virtual.5.html

update:	$(DAEMONS) $(COMMANDS) $(CONFIG)

Makefile: Makefile.in
	(set -e; echo "# DO NOT EDIT"; $(OPTS) $(SHELL) ../makedefs && cat $?) >$@

clean:
	echo clean

tidy:	clean

clobber:
	rm -f $(DAEMONS) $(COMMANDS) $(CONFIG)

bounce.8.html: ../bounce/bounce.c
	srctoman $? | nroff -man | man2html | postlink >$@

defer.8.html: bounce.8.html
	rm -f $@
	ln -s $? $@

error.8.html: ../error/error.c
	srctoman $? | nroff -man | man2html | postlink >$@

cleanup.8.html: ../cleanup/cleanup.c
	srctoman $? | nroff -man | man2html | postlink >$@

local.8.html: ../local/local.c
	srctoman $? | nroff -man | man2html | postlink >$@

master.8.html: ../master/master.c
	srctoman $? | nroff -man | man2html | postlink >$@

pickup.8.html: ../pickup/pickup.c
	srctoman $? | nroff -man | man2html | postlink >$@

pipe.8.html: ../pipe/pipe.c
	srctoman $? | nroff -man | man2html | postlink >$@

qmgr.8.html: ../qmgr/qmgr.c
	srctoman $? | nroff -man | man2html | postlink >$@

showq.8.html: ../showq/showq.c
	srctoman $? | nroff -man | man2html | postlink >$@

smtp.8.html: ../smtp/smtp.c
	srctoman $? | nroff -man | man2html | postlink >$@

smtpd.8.html: ../smtpd/smtpd.c
	srctoman $? | nroff -man | man2html | postlink >$@

trivial-rewrite.8.html: ../trivial-rewrite/trivial-rewrite.c
	srctoman $? | nroff -man | man2html | postlink >$@

postalias.1.html: ../postalias/postalias.c
	srctoman $? | nroff -man | man2html | postlink >$@

postcat.1.html: ../postcat/postcat.c
	srctoman $? | nroff -man | man2html | postlink >$@

postconf.1.html: ../postconf/postconf.c
	srctoman $? | nroff -man | man2html | postlink >$@

postdrop.1.html: ../postdrop/postdrop.c
	srctoman $? | nroff -man | man2html | postlink >$@

postfix.1.html: ../postfix/postfix.c
	srctoman $? | nroff -man | man2html | postlink >$@

postkick.1.html: ../postkick/postkick.c
	srctoman $? | nroff -man | man2html | postlink >$@

postlock.1.html: ../postlock/postlock.c
	srctoman $? | nroff -man | man2html | postlink >$@

postlog.1.html: ../postlog/postlog.c
	srctoman $? | nroff -man | man2html | postlink >$@

postmap.1.html: ../postmap/postmap.c
	srctoman $? | nroff -man | man2html | postlink >$@

postsuper.1.html: ../postsuper/postsuper.c
	srctoman $? | nroff -man | man2html | postlink >$@

sendmail.1.html: ../sendmail/sendmail.c
	srctoman $? | nroff -man | man2html | postlink >$@

mailq.1.html: sendmail.1.html
	rm -f $@
	ln -s $? $@

newaliases.1.html: sendmail.1.html
	rm -f $@
	ln -s $? $@

access.5.html: ../conf/access
	srctoman - $? | nroff -man | man2html | postlink >$@

aliases.5.html: ../conf/aliases
	srctoman - $? | nroff -man | man2html | postlink >$@

canonical.5.html: ../conf/canonical
	srctoman - $? | nroff -man | man2html | postlink >$@

relocated.5.html: ../conf/relocated
	srctoman - $? | nroff -man | man2html | postlink >$@

transport.5.html: ../conf/transport
	srctoman - $? | nroff -man | man2html | postlink >$@

virtual.5.html: ../conf/virtual
	srctoman - $? | nroff -man | man2html | postlink >$@
