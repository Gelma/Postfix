<html> <head> </head> <body> <pre>
TRIVIAL-REWRITE(8)                             TRIVIAL-REWRITE(8)

<b>NAME</b>
       trivial-rewrite  - Postfix address rewriting and resolving
       daemon

<b>SYNOPSIS</b>
       <b>trivial-rewrite</b> [generic Postfix daemon options]

<b>DESCRIPTION</b>
       The <b>trivial-rewrite</b> daemon processes two types  of  client
       service requests:

       <b>rewrite</b>
              Rewrite  an  address to standard form. The <b>trivial-</b>
              <b>rewrite</b> daemon  by  default  appends  local  domain
              information  to  unqualified  addresses, swaps bang
              paths to domain form,  and  strips  source  routing
              information.  This process is under control of sev-
              eral configuration parameters (see below).

       <b>resolve</b>
              Resolve an address to a (<i>transport</i>, <i>nexthop</i>, <i>recip-</i>
              <i>ient</i>) triple. The meaning of the results is as fol-
              lows:

              <i>transport</i>
                     The delivery agent to use. This is the first
                     field of an entry in the <b>master.cf</b> file.

              <i>nexthop</i>
                     The host to send to. For local delivery this
                     is an empty string.

              <i>recipient</i>
                     The  envelope  recipient  address  that   is
                     passed on to <i>nexthop</i>.

              The  <b>trivial-rewrite</b> daemon by default only distin-
              guishes between local and non-local mail. For finer
              control  over mail routing, use the optional <a href="transport.5.html"><b>trans-</b></a>
              <a href="transport.5.html"><b>port</b>(5)</a> lookup table.

       This program expects to be run from the <a href="master.8.html"><b>master</b>(8)</a>  process
       manager.

<b>STANDARDS</b>
       None.  The  command  does  not  interact  with the outside
       world.

<b>SECURITY</b>
       The <b>trivial-rewrite</b> daemon is not security sensitive.   By
       default,  this  daemon  does  not  talk to remote or local
       users.  It can run at a fixed low privilege in a  chrooted
       environment.

<b>DIAGNOSTICS</b>
       Problems and transactions are logged to <b>syslogd</b>(8).

<b>BUGS</b>
<b>CONFIGURATION</b> <b>PARAMETERS</b>
       The  following  <b>main.cf</b> parameters are especially relevant
       to this program. See the Postfix <b>main.cf</b> file  for  syntax
       details  and  for  default  values. Use the <b>postfix</b> <b>reload</b>
       command after a configuration change.

<b>Miscellaneous</b>
       <b>inet</b><i>_</i><b>interfaces</b>
              The  network  interfaces  that  this  mail   system
              receives  mail  on.   This  information  is used to
              determine if <i>user</i>@[<i>net.work.addr.ess</i>] is  local  or
              remote.

       <b>mydestination</b>
              List  of domains that this machine considers local.

       <b>myorigin</b>
              The domain that locally-posted mail appears to come
              from.

       <b>resolve</b><i>_</i><b>unquoted</b><i>_</i><b>address</b>
              When resolving an address, do not quote the address
              localpart as per <a href="http://www.faqs.org/rfcs/rfc822.html">RFC 822</a>, so that additional  <b>@</b>,  <b>%</b>
              or  <b>!</b>   characters  remain visible. This is techni-
              cally  incorrect,  but  allows  us  to  stop  relay
              attacks  when forwarding mail to a Sendmail primary
              MX host.

<b>Rewriting</b>
       <b>allow</b><i>_</i><b>percent</b><i>_</i><b>hack</b>
              Rewrite <i>user</i>%<i>domain</i> to <i>user</i>@<i>domain</i>.

       <b>append</b><i>_</i><b>at</b><i>_</i><b>myorigin</b>
              Rewrite <i>user</i> to <i>user</i>@$<b>myorigin</b>.

       <b>append</b><i>_</i><b>dot</b><i>_</i><b>mydomain</b>
              Rewrite <i>user</i>@<i>host</i> to <i>user</i>@<i>host</i>.$<b>mydomain</b>.

       <b>swap</b><i>_</i><b>bangpath</b>
              Rewrite <i>site</i>!<i>user</i> to <i>user</i>@<i>site</i>.

<b>Routing</b>
       <b>local</b><i>_</i><b>transport</b>
              Where to deliver mail for destinations  that  match
              $<b>mydestination</b>  or  $<b>inet</b><i>_</i><b>interfaces</b>.   The default
              transport is <b>local</b>.

              Syntax is <i>transport</i>:<i>nexthop</i>; see  <a href="transport.5.html"><b>transport</b>(5)</a>  for
              details. The :<i>nexthop</i> part is optional.

       <b>default</b><i>_</i><b>transport</b>
              Where to deliver non-local mail when no information
              is explicitly given in the <a href="transport.5.html"><b>transport</b>(5)</a> table.  The
              default transport is <b>smtp</b>.

              Syntax  is  <i>transport</i>:<i>nexthop</i>; see <a href="transport.5.html"><b>transport</b>(5)</a> for
              details. The :<i>nexthop</i> part is optional.

       <b>parent</b><i>_</i><b>domain</b><i>_</i><b>matches</b><i>_</i><b>subdomains</b>
              List of Postfix features that use  <i>domain.tld</i>  pat-
              terns   to  match  <i>sub.domain.tld</i>  (as  opposed  to
              requiring <i>.domain.tld</i> patterns).

       <b>relayhost</b>
              The default host to send non-local mail to when  no
              entry is matched in the <a href="transport.5.html"><b>transport</b>(5)</a> table.

              When  no  <b>relayhost</b>  is  specified,  mail is routed
              directly to the destination's mail exchanger.

       <b>transport</b><i>_</i><b>maps</b>
              List of tables with <i>domain</i> to (<i>transport,</i>  <i>nexthop</i>)
              mappings.

<b>SEE</b> <b>ALSO</b>
       <a href="master.8.html">master(8)</a> process manager
       syslogd(8) system logging
       <a href="transport.5.html">transport(5)</a> transport table format

<b>LICENSE</b>
       The  Secure  Mailer  license must be distributed with this
       software.

<b>AUTHOR(S)</b>
       Wietse Venema
       IBM T.J. Watson Research
       P.O. Box 704
       Yorktown Heights, NY 10598, USA

                                               TRIVIAL-REWRITE(8)
</pre> </body> </html>
